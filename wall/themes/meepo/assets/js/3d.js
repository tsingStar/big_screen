var camera,scene,renderer,controls,objects=[],targets={table:[],torus:[],sphere:[],helix:[],grid:[],gene:[],earth:[]},style="table",rotationY_add=0,animate_start=0;function init(){(camera=new THREE.PerspectiveCamera(40,window.innerWidth/window.innerHeight,1,1e4)).position.z=3e3,scene=new THREE.Scene,tableLine_odd=new THREE.Scene,tableLine_even=new THREE.Scene;for(var e=0;e<table.length;e++){var t=document.createElement("div");t.className="element";var n=document.createElement("img");n.src=table[e].src,n.setAttribute("bowtie",""),n.setAttribute("company",""),n.setAttribute("name",table[e].nick_name),n.setAttribute("text",""),n.setAttribute("imgId",""),t.appendChild(n),(h=new THREE.CSS3DObject(t)).position.x=4e3*Math.random()-2e3,h.position.y=4e3*Math.random()-2e3,h.position.z=4e3*Math.random()-2e3,scene.add(h),objects.push(h),(h=new THREE.Object3D).position.z=-3e4,targets.table.push(h)}for(var o=new THREE.Vector3,i=(e=0,objects.length);e<i;e++){(h=new THREE.Object3D).position.x=1200*Math.cos(-e),h.position.y=1200*Math.sin(-e),h.position.z=200-60*e*1.5,h.rotation.z=.03*-e,h.lookAt(o),targets.torus.push(h)}for(o=new THREE.Vector3,e=0,i=objects.length;e<i;e++){var s=new THREE.Object3D;s.position.x=e%5*400-800,s.position.y=-Math.floor(e/5)%5*400+800,s.position.z=1e3*Math.floor(e/25)-2e3,o.x=s.position.x,o.y=s.position.y,o.z=s.position.z,s.lookAt(o),targets.grid.push(s)}for(o=new THREE.Vector3,e=0,i=objects.length;e<i;e++){if(0==e)var a=1.025*Math.acos(2*e/i-1),r=Math.sqrt(i*Math.PI)*a*1.01;else a=Math.acos(2*e/i-1),r=Math.sqrt(i*Math.PI)*a;(h=new THREE.Object3D).position.x=750*Math.cos(r)*Math.sin(a),h.position.y=750*Math.sin(r)*Math.sin(a),h.position.z=750*Math.cos(a),o.copy(h.position).multiplyScalar(2),h.lookAt(o),targets.sphere.push(h)}for(o=new THREE.Vector3,e=0,i=objects.length;e<i;e++){a=.175*e+Math.PI;(h=new THREE.Object3D).position.x=900*Math.sin(a),h.position.y=-8*e+450,h.position.z=900*Math.cos(a),o.x=2*h.position.x,o.y=h.position.y,o.z=2*h.position.z,h.lookAt(o),targets.helix.push(h)}for(o=new THREE.Vector3,e=0,i=objects.length;e<i;e++){a=.175*e+Math.PI;(h=new THREE.Object3D).position.x=900*Math.sin(a),h.position.z=900*Math.cos(a),o.x=2*h.position.x,o.y=h.position.y,o.z=2*h.position.z,h.lookAt(o),targets.earth.push(h)}o=new THREE.Vector3;var p=[{x:0,y:0,z:0},{x:0,y:0,z:0}],c=0;for(e=index=0,i=objects.length;e<i;e++){var d=c%2==0?7:2,h=new THREE.Object3D;if(0==index){r=.3*c+Math.PI;var E=200*-c+1e3;h.position.setFromCylindricalCoords(800,r,E),p[0].x=h.position.x,p[0].y=h.position.y,p[0].z=h.position.z}if(1==index){r=.3*c+2*Math.PI,E=p[0].y;h.position.setFromCylindricalCoords(800,r,E),p[1].x=h.position.x,p[1].y=h.position.y,p[1].z=h.position.z}if(1<index){var m=(p[0].z-p[1].z)/(p[0].x-p[1].x),z=p[1].z-m*p[1].x,l=p[0].x-p[1].x;h.position.x=p[0].x-(index-1)/6*l,h.position.y=p[0].y,h.position.z=m*h.position.x+z}index++,d==index&&(c++,index=0),targets.gene.push(h)}(renderer=new THREE.CSS3DRenderer).setSize(window.innerWidth,window.innerHeight),renderer.domElement.style.position="absolute",renderer.domElement.className="abc",document.getElementById("container").appendChild(renderer.domElement),window.addEventListener("resize",onWindowResize,!1)}function transform(e,t,n,o){TWEEN.removeAll(),scene_init();for(var i=animate_start=0;i<objects.length;i++){var s=objects[i],a=e[i];new TWEEN.Tween(s.position).to({x:a.position.x,y:a.position.y,z:a.position.z},Math.random()*t+t).easing(TWEEN.Easing.Exponential.InOut).start(),"table"==n?new TWEEN.Tween(s.position).to({x:a.position.x,z:-1e4},1e3*Math.random()+2e3).delay(1e3*Math.random()+7800).start():"torus"==n?new TWEEN.Tween(s.position).to({z:-3e5},1e3*Math.random()+3e3).delay(1e3*Math.random()+24500).start():"sphere"==n?new TWEEN.Tween(s.position).to({y:-5e3},1e3*Math.random()+3e3).delay(23500).start():"grid"==n?new TWEEN.Tween(s.position).to({x:a.position.x,y:a.position.y,z:a.position.z},2e3*Math.random()+2e3).delay(1e3*Math.random()+19500).start():"helix"==n&&new TWEEN.Tween(s.position).to({y:3e3,z:a.position.z},1e3*Math.random()+2e3).delay(1e3*Math.random()+18500).start(),new TWEEN.Tween(s.rotation).to({x:a.rotation.x,y:a.rotation.y,z:a.rotation.z},Math.random()*t+t).easing(TWEEN.Easing.Exponential.InOut).start()}new TWEEN.Tween(this).to({},t*o/2).onUpdate(function(){render(n)}).start()}function onWindowResize(){camera.aspect=window.innerWidth/window.innerHeight,camera.updateProjectionMatrix(),renderer.setSize(window.innerWidth,window.innerHeight),render()}function animate(){window.requestAnimationFrame(animate),TWEEN.update()}function scene_init(){scene.position.x=0,scene.position.y=0,scene.position.z=0,scene.rotation.x=0,scene.rotation.y=0,scene.rotation.z=0}function update(){for(var e=0;e<objects.length;e++){var t=objects[e];t.position.z+=20,t.rotation.z+=1*e/1e3,800<t.position.z&&(t.position.z=200-60*(objects.length-1)*1.5)}}function render(e){"torus"==e&&(animate_start+=1,scene.rotation.z+=.008,300<animate_start&&update()),"grid"==e&&(animate_start+=1,scene.rotation.y-=.01,600<animate_start?0<scene.position.z&&(scene.position.z-=7):300<animate_start?scene.position.z=scene.position.z:150<animate_start&&(scene.position.z+=7)),"sphere"==e&&(1600<(animate_start+=1)?0<scene.position.z&&(scene.rotation.y+=.008,scene.position.z-=7):550<animate_start?(scene.rotation.y+=.003,scene.position.z=scene.position.z):350<animate_start?(scene.rotation.y+=.008,scene.position.z+=7):scene.rotation.y+=.008),"helix"==e&&(animate_start+=1,scene.rotation.y-=.01,600<animate_start?0<scene.position.z&&(scene.position.z-=7):300<animate_start?scene.position.z=scene.position.z:150<animate_start&&(scene.position.z+=7)),"gene"==e&&(animate_start+=1,scene.position.x=-2e3,scene.rotation.z=1.7,scene.rotation.x-=.02,step=animate_start%600,step2=animate_start%300,150<step2?scene.rotation.y+=.001:scene.rotation.y-=.001,300<step?scene.position.z+=8:scene.position.z-=8,300<step?scene.position.z+=8:scene.position.z-=8),renderer.render(scene,camera)}
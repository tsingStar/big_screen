var initEffect=function(t){function l(t,i){return Math.random()*(i-t)+t}function d(t,i,e,h,s,o,n,r,a,c,f){this.size=t,this.rotSpeed=i,this.rot=e,this.delay=y+h,this.life=0,this.ox=a,this.oy=c,this.x,this.y,this.vx=n,this.vy=r,this.color=f}t=t;var i=document.createElement("canvas"),w=i.width=$("#effect").width(),u=i.height=$("#effect").height(),h=.02,y=50,v=5,p=10,M=.01,x=.1,g=3,z=5,m=1,I=5,P=2*Math.PI/5,S=0,T=[];t.appendChild(i);var s=i.getContext("2d");I=500<window.innerWidth&&350<window.innerHeight?(m=5,10):5;var W=function(t,i){return parseInt(Math.random()*(1+(t<i?i-t:t-i))+(t<i?t:i))};d.prototype.use=function(){++this.life,this.life>=this.delay?(this.x+=3*Math.cos(this.rot),this.y+=3*Math.sin(this.rot)):(this.life<=y&&(this.rot+=this.rotSpeed,this.ox+=this.vx,this.oy+=this.vy),this.x=this.ox+Math.cos(this.rot)*this.size,this.y=this.oy+Math.sin(this.rot)*this.size);var t=Math.min(this.life,y)/y;100<this.life&&(t=(200-this.life)/100),s.lineWidth=this.size/3,s.strokeStyle=this.color.replace("alp",t),s.translate(this.x,this.y),s.rotate(this.rot),s.beginPath(),s.moveTo(-this.size/3,-this.size/2),s.lineTo(this.size,0),s.lineTo(-this.size/3,this.size/2),s.stroke(),s.rotate(-this.rot),s.translate(-this.x,-this.y)},function t(){window.requestAnimationFrame(t),++S,s.clearRect(0,0,$("#effect").width(),$("#effect").height()),Math.random()<h&&function(){var t=l(v,p),i=(.5<l(0,1)?-1:1)*l(M,x),e=l(g,z),h=l(0,w),s=l(0,u),o=l(m,I),n=l(0,2*Math.PI),r=Math.cos(n)*o,a=Math.sin(n)*o,c=W(50,100)+"%";color="hsla(hue, 80%, diaosi, alp)".replace("hue",S%360).replace("diaosi",c);for(var f=0;f<5;++f)T.push(new d(t,i,n+P*f,e*f,h+Math.cos(P*f)*t,s+Math.sin(P*f)*t,r,a,h,s,color))}();for(var i=0;i<T.length;++i){var e=T[i];e.use(),(e.x<0||e.x>w||e.y<0||e.y>u||200<e.life)&&(T.splice(i,1),--i)}}(),$(window).bind("resize",function(){I=500<window.innerWidth&&350<window.innerHeight?(m=5,10):4,w=i.width=$("#effect").width(),u=i.height=$("#effect").height(),s.clearRect(0,0,$("#effect").width(),$("#effect").height())})};
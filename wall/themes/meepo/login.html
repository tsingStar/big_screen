<link rel="stylesheet" type="text/css" href="themes/meepo/assets/css/screen_lottory_free.css">
<link href="/assets/plugs/animate.css-3.7.1/animate.min.css" type="text/css" rel="stylesheet">
<link rel="stylesheet" href="/assets/plugs/emoji/emoji.css" />
<style>
	::-webkit-scrollbar {
		display: none;
	}

	.member-list {
		height: 70%;
		overflow: scroll;
	}

	.qiandao {
		background-color: rgba(0, 0, 0, 0.3);
		height: 100%;
		width: 100%;
		overflow: auto;
		position: relative;
	}

	.tuchu {
		position: absolute;
		top: 0;
		left: 0;
		bottom: 0;
		right: 0;
		background-color: rgba(0, 0, 0, 0.75);
		z-index: 2;
		display: none
	}

	.tuchug {
		border-radius: 100%;
		top: 50%;
		left: 50%;
		margin: -350px 0 0 -350px;
		width: 700px;
		height: 700px;
		position: absolute;
		z-index: 4;
	}

	.tuchuk {
		background-color: #FFF;
		border-radius: 10px;
		top: 50%;
		left: 50%;
		margin: -200px 0 0 -150px;
		width: 300px;
		height: 400px;
		position: absolute;
		z-index: 4;
	}

	.tx {
		width: 226px;
		height: 226px;
		border-radius: 100%;
		overflow: hidden;
		margin: 40px 37px 15px 37px;
	}

	.xm {
		font-size: 20px;
		color: #000;
		overflow: hidden;
		white-space: nowrap;
		text-overflow: ellipsis;
		padding: 12px 0;
		text-align: center;
		position: absolute;
		bottom: 0;
		margin: 0;
		width: 100%;
		background-color: rgba(245, 245, 245, 0.57);
		border-radius: 0 0 10px 10px;
	}


	.tuchu.view {
		display: block;
		-webkit-animation: vp 0.5s 8s ease forwards;
		-moz-animation: 0.5s 8s ease forwards;
	}

	.view .tuchuk {
		-webkit-animation: vv 8s 0s ease forwards;
		-moz-animation: 8s 0s ease forwards;
	}

	.view .tuchug {
		-webkit-animation: vg 6.5s 1s ease forwards;
		-moz-animation: 6.5s 1s ease forwards;
		opacity: 0;
	}

	@-webkit-keyframes vv {
		0% {
			-webkit-transform: scale(0.1);
			opacity: 0;
		}

		10% {
			-webkit-transform: scale(1.5);
			opacity: 1;
		}

		20% {
			-webkit-transform: scale(1);
			opacity: 1;
		}

		90% {
			-webkit-transform: scale(1);
			opacity: 1;
		}

		100% {
			-webkit-transform: scale(0);
			opacity: 0;
		}
	}

	@-webkit-keyframes vp {
		0% {
			-webkit-transform: scale(1);
			opacity: 1;
		}

		100% {
			-webkit-transform: scale(1);
			opacity: 0;
		}
	}

	@-webkit-keyframes vg {
		0% {
			-webkit-transform: rotate(0);
			opacity: 0;
		}

		10% {
			-webkit-transform: rotate(0);
			opacity: 1;
		}

		90% {
			-webkit-transform: rotate(60deg);
			opacity: 1;
		}

		100% {
			-webkit-transform: rotate(70deg);
			opacity: 0;
		}

	}

	.qiandao ul {
		list-style: none;
		margin: 0;
		padding: 20px;
		box-sizing: border-box;
		overflow: hidden;
	}

	.qiandao ul li {
		float: left;
		width: 144px;
		height: 144px;
		text-align: center;
		padding: 0;
		display: none;
		margin: 15px 15px 0 0
	}

	.qiaodaotx {
		width: 108px;
		height: 108px;
		margin: 0 auto;
		border-radius: 100%;
		overflow: hidden;
		display: none
	}

	.qiaodaoxm {
		font-size: 16px;
		color: #FFF;
		overflow: hidden;
		white-space: nowrap;
		text-overflow: ellipsis;
		margin: 0 auto;
		padding: 5px 0;
		display: none;
		text-align: center;
		width: 100%;
	}


	.qiandao ul li.qiaodaosf {
		display: block;
		position: relative;
	}



	.qiaodaosf .qiaodaotx {
		display: block;
		box-shadow: 0px 1px 5px rgba(0, 0, 0, 0.44);
	}


	.qiaodaosf .qiaodaoxm {
		display: block
	}


</style>
<script src="themes/meepo/assets/js/qdbase.js?20154223" type="text/javascript" charset="utf-8"></script>
<script src="themes/meepo/assets/js/screen_qd.js" type="text/javascript" charset="utf-8"></script>
<script src="/assets/plugs/jquery.scrollTo-2.1.2/jquery.scrollTo.min.js" type="text/javascript" charset="utf-8">
</script>
</head>

<body class="FUN WALL">
	{include file="themes/meepo/top_panel.html"}
	<div class="Panel Lottery" style="display: block; opacity: 1;">
		<div class="tuchu ">
			<div class="tuchug">
				<img src="themes/meepo/assets/images/icon/bbb.png"></div>
			<div class="tuchuk">
				<img class="tx" id="qdtx" src="">
				<p class="xm" id="qdname">官方签到女神</p>
			</div>
		</div>
		<div class="qiandao" id="ddd">
			<ul id="divDetail"></ul>
		</div>
		<script src="/assets/js/jquery.animate.min.js" type="text/javascript"></script>
		<script src="/assets/plugs/hotkeys-master/dist/hotkeys.min.js"></script>
		<script src="themes/meepo/assets/js/bindhotkeys.js"></script>
		<script>
			//签到人数
			var qiandaonum = {$qiandaonum};
			var showcount = 0; 
			{literal}
			function showuser() {
				if (notshowusers.length <= 0) {
					setTimeout(function () {
						showuser();
					}, 3000);
					return;
				}
				showcount++;
				var user = notshowusers.shift();
				var delay = 500;
				var offsetdelay = 0;
				if (showcount > qiandaonum) {
					//需要放大显示
					$('#qdtx').attr('src', user.avatar);
					$('#qdname').text(user.nickname)
					$(".tuchu").addClass('view');
					delay = 7000;
					offsetdelay = 3000;
				}
				setTimeout(function () {
					$(".tuchu").removeClass('view');
					var item = '<li id="dh' + showcount + '" class="qiaodaosf" ><img class="qiaodaotx"  id="hd' +
						showcount + '" src="' + user.avatar + '"><p id="nc' + showcount + '" class="qiaodaoxm">' + user
						.nickname + '</p></li>';
					$('#divDetail').append(item);
					$('#dh' + showcount).animateControl('rubberBand');
					$('#ddd').scrollTo($('#divDetail').height(), 500);
				}, delay);
				//添加一个头像
				setTimeout(function () {
					showuser();
				}, delay + offsetdelay);
			}
			//没有显示的人
			var notshowusers = [];
			//获取数据
			function getjson(lastsignorder) {

				$.getJSON(Path_url('ajax_act_get_sign.php'), {
						mid: lastsignorder,
						num: 50,
					},
					function (json) {
						if (json.code < 0) {
							return false;
						}
						if (json.data.users.length > 0) {
							notshowusers = notshowusers.concat(json.data.users);
						}
						setTimeout("getjson(" + json.data.mid + ")", 5000);
					});
			}

			$(function () {
				getjson(0);
				setTimeout(function () {
					showuser()
				}, 3000);
			}); 
			{/literal}
		</script>
	</div>
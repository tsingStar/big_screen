jQuery(function(r){r(".btn_cancel").on("click",function(){if(!confirm("确认要取消这个中奖记录吗？"))return!1;var a=r(this).attr("data");if(a<=0)return alert("数据错误"),!1;var t;(t=a,r.ajax({url:"module.php?m=prize&c=admin&a=ajax_act_cancel_userprize",data:{id:t},type:"get",dataType:"json"})).done(function(a){alert(a.message),0<a.code&&window.location.reload()}).fail(function(){alert("请检查您的网络，有可能是断网了哦。")})}),r(".btn_delete").on("click",function(){if(!confirm("确认要删除这个中奖记录吗？"))return!1;var a=r(this).attr("data");if(a<=0)return alert("数据错误"),!1;var t;(t=a,r.ajax({url:"module.php?m=prize&c=admin&a=ajax_act_delete_userprize",data:{id:t},type:"get",dataType:"json"})).done(function(a){alert(a.message),0<a.code&&window.location.reload()}).fail(function(){alert("请检查您的网络，有可能是断网了哦。")})}),r(".btn_give").on("click",function(){var a=r(this).attr("data");if(a<=0)return alert("数据错误"),!1;var t;(t=a,r.ajax({url:"module.php?m=prize&c=admin&a=ajax_act_give_userprize",data:{id:t},type:"get",dataType:"json"})).done(function(a){alert(a.message),0<a.code&&window.location.reload()}).fail(function(){alert("请检查您的网络，有可能是断网了哦。")})}),r(".btn_cleardata").on("click",function(){if(!confirm("确定要删除中奖记录吗?"))return!1;var a=r(this).attr("plugname"),t=r(this).attr("activityid");e(a,t).done(function(a){0<a.code||alert(a.message)}).fail(function(){alert("请检查您的网络，有可能是断网了哦。")})}),r(".btn-redpacket").on("click",function(){(function(a){return r.ajax({url:"module.php?m=prize&c=admin&a=ajaxGetSendRedpackets",data:{id:a},type:"get",dataType:"json"})})(r(this).attr("data-id")).done(function(a){if(0<a.code){r(".sendredpacketstatus").html("");var t=function(a){if(a.length<=0)return;var t="<table class='table table-striped table-bordered table-hover'>";t+="<tr><td>订单号</td><td>状态</td><td>时间</td><td>备注</td></tr>";for(var e=0,r=a.length;e<r;e++){var n="";"开始发放"==a[e].status&&(n="开始发放"),"发放完成"==a[e].status&&(n="发放完成"),"发放失败"==a[e].status&&(n=0==e?'发放失败<a href="###" class="resend" data-orderno="'+a[e].orderno+'">重新发</a>':"发放失败"),"等待微信处理中"==a[e].status&&(n='等待微信处理中<a href="###" class="checkstatus" data-orderno="'+a[e].orderno+'">获取最新状态</a>'),t+="<tr><td>"+a[e].orderno+"</td><td>"+n+"</td><td>"+a[e].created_at+"</td><td>"+a[e].remark+"</td></tr>"}return t+="</table>"}(a.data);r(t).appendTo(".sendredpacketstatus"),r(".resend").on("click",function(){var a=r(this).attr("data-orderno");ajaxResendRedpacket(a).done(function(a){alert(a.message),0<a.code&&r("#redpacketsmodal").modal("hide")})}),r(".checkstatus").on("click",function(){var a=r(this).attr("data-orderno");ajaxCheckRedpacket(a).done(function(a){alert(a.message),0<a.code&&r("#redpacketsmodal").modal("hide")})}),r("#redpacketsmodal").modal("show")}})});var e=function(a,t){var e="";return a&&(e+="&plugname="+a),t&&(e+="&activityid="+t),r.ajax({url:"module.php?m=prize&c=admin&a=ajax_act_cleardata"+e,type:"get",dataType:"json"})}});
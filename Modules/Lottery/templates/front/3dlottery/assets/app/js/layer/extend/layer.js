!function(){layer.use("skin/layer.ext.css",function(){layer.layui_layer_extendlayerextjs=!0});function p(e){return a.skin?" "+a.skin+" "+a.skin+"-"+e:""}var a=layer.cache||{};layer.prompt=function(i,n){"function"==typeof(i=i||{})&&(n=i);var t,e=2==i.formType?'<textarea class="layui-layer-input">'+(i.value||"")+"</textarea>":'<input type="'+(1==i.formType?"password":"text")+'" class="layui-layer-input" value="'+(i.value||"")+'">';return layer.open($.extend({btn:["&#x786E;&#x5B9A;","&#x53D6;&#x6D88;"],content:e,skin:"layui-layer-prompt"+p("prompt"),success:function(e){(t=e.find(".layui-layer-input")).focus()},yes:function(e){var a=t.val();""===a?t.focus():a.length>(i.maxlength||500)?layer.tips("&#x6700;&#x591A;&#x8F93;&#x5165;"+(i.maxlength||500)+"&#x4E2A;&#x5B57;&#x6570;",t,{tips:1}):n&&n(a,e,t)}},i))},layer.tab=function(e){var n=(e=e||{}).tab||{};return layer.open($.extend({type:1,skin:"layui-layer-tab"+p("tab"),title:function(){var e=n.length,a=1,i="";if(0<e)for(i='<span class="layui-layer-tabnow">'+n[0].title+"</span>";a<e;a++)i+="<span>"+n[a].title+"</span>";return i}(),content:'<ul class="layui-layer-tabmain">'+function(){var e=n.length,a=1,i="";if(0<e)for(i='<li class="layui-layer-tabli xubox_tab_layer">'+(n[0].content||"no content")+"</li>";a<e;a++)i+='<li class="layui-layer-tabli">'+(n[a].content||"no  content")+"</li>";return i}()+"</ul>",success:function(e){var a=e.find(".layui-layer-title").children(),n=e.find(".layui-layer-tabmain").children();a.on("mousedown",function(e){e.stopPropagation?e.stopPropagation():e.cancelBubble=!0;var a=$(this),i=a.index();a.addClass("layui-layer-tabnow").siblings().removeClass("layui-layer-tabnow"),n.eq(i).show().siblings().hide()})}},e))},layer.photos=function(n,e,t){var a,i,l,r,o={};if((n=n||{}).photos){var s=n.photos.constructor===Object,u=s?n.photos:{},y=u.data||[],c=u.start||0;if(o.imgIndex=c+1,s){if(0===y.length)return void layer.msg("&#x6CA1;&#x6709;&#x56FE;&#x7247;")}else{var d=$(n.photos);if(0===d.find(n.img||"img").length)return;if(e||d.find(u.img||"img").each(function(e){var a=$(this);y.push({alt:a.attr("alt"),pid:a.attr("layer-pid"),src:a.attr("layer-src")||a.attr("src"),thumb:a.attr("src")}),a.on("click",function(){layer.photos($.extend(n,{photos:{start:e,data:y,tab:n.tab},full:n.full}),!0)})}),!e)return}o.imgprev=function(e){o.imgIndex--,o.imgIndex<1&&(o.imgIndex=y.length),o.tabimg(e)},o.imgnext=function(e,a){o.imgIndex++,o.imgIndex>y.length&&(o.imgIndex=1,a)||o.tabimg(e)},o.keyup=function(e){if(!o.end){var a=e.keyCode;e.preventDefault(),37===a?o.imgprev(!0):39===a?o.imgnext(!0):27===a&&layer.close(o.index)}},o.tabimg=function(e){y.length<=1||(u.start=o.imgIndex-1,layer.close(o.index),layer.photos(n,!0,e))},o.event=function(){o.bigimg.hover(function(){o.imgsee.show()},function(){o.imgsee.hide()}),o.bigimg.find(".layui-layer-imgprev").on("click",function(e){e.preventDefault(),o.imgprev()}),o.bigimg.find(".layui-layer-imgnext").on("click",function(e){e.preventDefault(),o.imgnext()}),$(document).on("keyup",o.keyup)},o.loadi=layer.load(1,{shade:!("shade"in n)&&.9,scrollbar:!1}),a=y[c].src,i=function(e){var a,i;layer.close(o.loadi),o.index=layer.open($.extend({type:1,area:(a=[e.width,e.height],i=[$(window).width()-100,$(window).height()-100],!n.full&&a[0]>i[0]&&(a[0]=i[0],a[1]=a[0]*i[1]/a[0]),[a[0]+"px",a[1]+"px"]),title:!1,shade:.9,shadeClose:!0,closeBtn:!1,move:".layui-layer-phimg img",moveType:1,scrollbar:!1,moveOut:!0,shift:5*Math.random()|0,skin:"layui-layer-photos"+p("photos"),content:'<div class="layui-layer-phimg"><img src="'+y[c].src+'" alt="'+(y[c].alt||"")+'" layer-pid="'+y[c].pid+'"><div class="layui-layer-imgsee">'+(1<y.length?'<span class="layui-layer-imguide"><a href="javascript:;" class="layui-layer-iconext layui-layer-imgprev"></a><a href="javascript:;" class="layui-layer-iconext layui-layer-imgnext"></a></span>':"")+'<div class="layui-layer-imgbar" style="display:'+(t?"block":"")+'"><span class="layui-layer-imgtit"><a href="javascript:;">'+(y[c].alt||"")+"</a><em>"+o.imgIndex+"/"+y.length+"</em></span></div></div></div>",success:function(e,a){o.bigimg=e.find(".layui-layer-phimg"),o.imgsee=e.find(".layui-layer-imguide,.layui-layer-imgbar"),o.event(e),n.tab&&n.tab(y[c],e)},end:function(){o.end=!0,$(document).off("keyup",o.keyup)}},n))},l=function(){layer.close(o.loadi),layer.msg("&#x5F53;&#x524D;&#x56FE;&#x7247;&#x5730;&#x5740;&#x5F02;&#x5E38;<br>&#x662F;&#x5426;&#x7EE7;&#x7EED;&#x67E5;&#x770B;&#x4E0B;&#x4E00;&#x5F20;&#xFF1F;",{time:3e4,btn:["下一张","不看了"],yes:function(){1<y.length&&o.imgnext(!0,!0)}})},(r=new Image).onload=function(){r.onload=null,i(r)},r.onerror=function(e){r.onerror=null,l(e)},r.src=a}}}();
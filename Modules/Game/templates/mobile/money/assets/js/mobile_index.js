requirejs.config({baseUrl:".",paths:{jquery:"/assets/js/jquery-3.3.1.min",weixin:"https://res.wx.qq.com/open/js/jweixin-1.2.0",apptool:"/mobile/template/app/js/app_tool",jqweui:"/mobile/template/app/js/jquery-weui.min",transit:"/Modules/Game/templates/mobile/money/assets/js/jquery.transit.min"},shim:{apptool:{deps:["jquery"]},jqweui:{deps:["jquery"]}}}),requirejs(["jquery","weixin","apptool","jqweui"],function(a,e){var n,i,u,s,d,l,c,o=function(){return a.ajax({url:"/Modules/module.php?m=game&c=mobile&a=ajaxGetData",type:"get",dataType:"json"})},t=a("#touchBox"),p=a(".money_box"),r=a("body"),h=(n=null,u=0,l=d=s=i=!1,c=a(window).height()-p.height(),{init:function(){w()},start:function(){l=!0,a("#play_tips").remove()},stop:function(){l=!1,j=0}});function w(){t.on(v.touchstart,function(o){o.preventDefault(),!1!==l&&(i=!0,u=o.type===v.touchstart?o.touches[0].pageY:o.pageY)}),t.on(v.touchmove,function(o){if(!1!==l){var t=o.type===v.touchmove?o.touches[0].pageY:o.pageY;i&&5<Math.abs(t-u)&&(!1===s?(null!=typeof e?a(window.shakeaudio).on("canplaythrough",function(){(window.shakeaudio.paused||window.shakeaudio.ended)&&window.shakeaudio.play()}):a(document).on("WeixinJSBridgeReady",function(){a(window.shakeaudio).load(),a(window.shakeaudio).on("canplaythrough",function(){(window.shakeaudio.paused||window.shakeaudio.ended)&&window.shakeaudio.play()})}),n=a('<div class="money"></div>'),p.prepend(n),n.css({y:c,scale:1}),d=s=!0,j++):s&&d&&n.css({top:c-(u-t)}))}}),t.on(v.touchend,function(o){!1!==l&&(i&&s&&d&&a(n).remove(),i=s=d=!1,u=0)}),a("#play_tips").on(v.touchend,function(o){a(o.currentTarget).remove()})}oldstatus=0,checkstatustimer=null,isbind=!1;function m(){o().done(function(o){if(0<o.code){if(o.data.id!=GAMECONFIG.id)return void window.location.reload();if(3==JOINSTATUS)return void _loading_toast._longshow("您已经得过奖了哦，请把中奖机会留给其他人吧！");GAMECONFIG.status=o.data.status,1==o.data.status&&(3!=oldstatus&&2!=oldstatus||window.location.reload(),oldstatus!=o.data.status&&_loading_toast._longshow("游戏还未开始,请等待按照主持人指挥操作")),2==o.data.status&&(_loading_toast._show("游戏进行中..."),oldstatus!=o.data.status&&(h.init(),h.start(),0==isbind&&(function o(){y=setTimeout(function(){o()},3e3),0!=j&&1!=f&&(f=!0,1==JOINSTATUS?g().done(function(o){j=0}).always(function(){f=!1}):f=!1)}(),isbind=!0))),3==o.data.status&&oldstatus!=o.data.status&&(_loading_toast._longshow("本轮游戏已经结束,后面可能还有游戏哦!"),h.stop(),function(){null!=y&&clearTimeout(y);1==isbind&&(isbind=!1)}()),oldstatus=o.data.status}}),checkstatustimer=setTimeout(m,3e3)}window.shakeaudio=null;var f=!1,y=null;var j=0,g=function(){return a.ajax({url:"/Modules/module.php?m=game&c=mobile&a=ajaxPostData",data:{userid:USERINFO.id,points:100*j},type:"post",dataType:"json"})};var v={touchstart:"touchstart",touchmove:"touchmove",touchend:"touchend"};a("document").ready(function(){window.shakeaudio=a("#Audio_PiuPlayer")[0],a(document).on("WeixinJSBridgeReady",function(){a(window.shakeaudio).load()}),r.on(v.touchmove,function(o){o.preventDefault()}),a(".dropdown-menu").click(function(){a("#pop_nav").hasClass("weui-popup-container-visible")||(a("#pop_nav").popup(),a(".weui-popup-overlay").show())}),a(document).on("WeixinJSBridgeReady",function(){e.call("hideOptionMenu")}),m()})});
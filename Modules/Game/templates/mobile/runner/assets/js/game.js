function init(n){var a,s,o,i,t,m,l,g,r={fontarr:["看什么看","赶紧跑","加油老铁","不要犹豫啊"],img_loadImg:"/Modules/Game/templates/mobile/runner/assets/images/loading.png",img_personImg:"/Modules/Game/templates/mobile/runner/assets/images/man.png",img_personsImg:"/Modules/Game/templates/mobile/runner/assets/images/man_run.png",img_treeImage:"/Modules/Game/templates/mobile/runner/assets/images/tree.png",img_green:"/Modules/Game/templates/mobile/runner/assets/images/green.png",img_road:"/Modules/Game/templates/mobile/runner/assets/images/road.png",img_sun:"/Modules/Game/templates/mobile/runner/assets/images/sun.png",img_cloud1:"/Modules/Game/templates/mobile/runner/assets/images/cloud1.png",img_cloud2:"/Modules/Game/templates/mobile/runner/assets/images/cloud2.png",img_cloud3:"/Modules/Game/templates/mobile/runner/assets/images/cloud3.png",img_fullbg:"/Modules/Game/templates/mobile/runner/assets/images/bg.jpg",img_treeImage_road:"/Modules/Game/templates/mobile/runner/assets/images/tree3.png",is_showfullbg:parseInt("0"),modol:0,speed:.3,speedStep:.5,music_on:parseInt("1"),showscore:parseInt("1")},c=1,u=100,d=!1,f=0,h=r.fontarr,p=new Image,I=new Image,w=new Image,b=new Image,e=(new Image,new Image),v=new Image,_=new Image,G=new Image,C=new Image,j=new Image,M=new Image,O=10,y=["personImg","personsImg","treeImage","green","road","sun","cloud1","cloud2","cloud3","fullbg"];function R(e){-1<contains(y,e)&&y.splice(contains(y,e),1),O--}function S(){$("#finger span").removeClass("on"),$("#ready").hide(),$("#finger").remove(),function e(){$("#g-voiceover").text(h[f]);1<h.length&&++f>h.length&&(f=0);0!=d&&setTimeout(function(){e()},1e3)}(),q(u),$("#start").remove(),d=!0,$(".cutdown-start").hide().removeClass("cutdownan-imation")}a=document.documentElement.clientWidth,s=document.documentElement.clientHeight,GetObj("gameCanvas").width=a,GetObj("gameCanvas").height=s,o=GetObj("gameCanvas"),i=o.getContext("2d"),(t=document.createElement("canvas")).width=GetObj("gameCanvas").width,t.height=GetObj("gameCanvas").height,m=t.getContext("2d"),i.clearRect(0,0,GetObj("gameCanvas").width,GetObj("gameCanvas").height),m.clearRect(0,0,t.width,t.height),p.onload=function(){!function(){A(0,0);var e=66;l=setInterval(function(){660<e&&(e=66),O<=1&&setTimeout(function(){clearInterval(l),i.clearRect(0,0,a,s),i.fillStyle="#c5f3ff",i.fillRect(0,0,o.width,o.height),function(){$("#ready,#finger,.g-pace").show(),2==c&&$("#ready").hide();N(),P(),H(),r.is_showfullbg&&W(M,0,0,640,1200,0,0,a,s);L(),W(I,0,0,366,520,a/2-90,s/2-60,180,260),i.drawImage(t,0,0),W(b,0,0,288,315,a/2-145,s/2-157.5,288,315),i.drawImage(t,0,0),$("#finger span").addClass("on"),$(".g-pace a").bind("touchstart",function(){var e=$(this).hasClass("sel")?1:2;$(".g-pace a").removeClass("sel"),$(this).addClass("sel"),1==d&&(r.speedStep,2==e&&n(),clearInterval(g),q(u))})}()},10),A(e,""),e+=66},50)}()},p.src=r.img_loadImg,I.src=r.img_personImg,w.src=r.img_personsImg,b.src=r.img_treeImage,e.src=r.img_green,v.src=r.img_road,_.src=r.img_sun,G.src=r.img_cloud1,C.src=r.img_cloud2,j.src=r.img_cloud3,M.src=r.img_fullbg,I.onload=function(){R("personImg")},b.onload=function(){R("treeImage")},e.onload=function(){R("green")},v.onload=function(){R("road")},_.onload=function(){R("sun")},G.onload=function(){R("cloud1")},C.onload=function(){R("cloud2")},j.onload=function(){R("cloud3")},M.onload=function(){R("fullbg")},r.is_showfullbg&&(b.src=r.img_treeImage_road,b.addEventListener("load",R,!1));var x=125,E=275,T=125,B=290,k=0;function A(e,n){i.beginPath(),i.fillStyle="white",i.fillRect(0,0,o.width,o.height),i.drawImage(p,e,0,66,120,a/2-33,s/2-60,66,120),i.font="14px Arial",i.fillStyle="orange";var t="loading...";n&&(t+=n),i.fillText(t,a/2-33,s/2+74),i.stroke()}function H(){W(e,0,0,640,464,0,s/2-157.5+50,a,464),i.drawImage(t,0,0)}function L(){W(v,0,0,640,625,0,s/2-157.5+50,a,625),i.drawImage(t,0,0)}function N(){W(_,0,0,231,93,a/2-57.75,s/2-135,115.5,46.5),i.drawImage(t,0,0)}function P(){W(G,0,0,254,120,a/2-63.5-127,s/2-200,127,60),W(C,0,0,163,59,a/2-40.75,s/2-200,81.5,29.5),W(j,0,0,228,107,a/2+26.75,s/2-200,114,53.5),i.drawImage(t,0,0)}function W(e,n,t,a,s,o,i,l,g){m.drawImage(e,n,t,a,s,o,i,l,g)}function q(e){g=setInterval(function(){875<x?(x=875,k++):0==x&&(x=0,k++),3744<B&&(B=0),function(e,n){i.clearRect(0,0,GetObj("gameCanvas").width,GetObj("gameCanvas").height),m.clearRect(0,0,t.width,t.height),i.fillStyle="#c5f3ff",i.fillRect(0,0,o.width,o.height),N(),P(),H(),r.is_showfullbg&&W(M,0,0,640,1200,0,0,a,s),L(),W(b,n,0,288,315,a/2-145,s/2-157.5,288,315),W(w,e,0,125,275,a/2-65,s/2-120,125,E),i.drawImage(t,0,0)}(x,B),(k+1)%2==0?x-=T:x+=T,B+=288},e)}function z(){i.clearRect(0,0,GetObj("gameCanvas").width,GetObj("gameCanvas").height),m.clearRect(0,0,t.width,t.height),i.fillStyle="#c5f3ff",i.fillRect(0,0,o.width,o.height),N(),P(),H(),r.is_showfullbg&&W(M,0,0,640,1200,0,0,a,s),L(),W(I,366,0,366,520,a/2-90,s/2-120,180,260),i.drawImage(t,0,0),W(b,0,0,288,315,a/2-145,s/2-157.5,288,315),i.drawImage(t,0,0),$("#g-voiceover").text("游戏已结束")}return{start:function(){c=2,S()},stop:function(){c=3,clearInterval(g),d=!1,z()},getStatus:function(){return c}}}function GetObj(e){for(var n=["body","div","ul","ol","li","i","b","p","span","label"],t=0;t<n.length;t++){return e==n[t]?document.getElementsByTagName(e)[0]:document.getElementById(e)}}function contains(e,n){for(var t=e.length;t--;)if(e[t]===n)return t;return-1}
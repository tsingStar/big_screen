requirejs.config({baseUrl:".",paths:{jquery:"/assets/js/jquery-3.3.1.min",weixin:"https://res.wx.qq.com/open/js/jweixin-1.2.0",apptool:"/mobile/template/app/js/app_tool",shake:"/mobile/template/app/js/shake",bubblybg:"/mobile/template/app/js/bubbly-bg",jqweui:"/mobile/template/app/js/jquery-weui.min"},shim:{apptool:{deps:["jquery"]},bubblybg:{deps:[]},jqweui:{deps:["jquery"]}}}),requirejs(["jquery","shake","weixin","apptool","bubblybg","jqweui"],function(e,o,a){var t=function(){return e.ajax({url:"/Modules/module.php?m=game&c=mobile&a=ajaxGetData",type:"get",dataType:"json"})};function i(){t().done(function(o){if(0<o.code){if(o.data.id!=GAMECONFIG.id)return void window.location.reload();if(3==JOINSTATUS)return void _loading_toast._longshow("您已经得过奖了哦，请把中奖机会留给其他人吧！");if(GAMECONFIG.status=o.data.status,1==o.data.status&&(3!=oldstatus&&2!=oldstatus||window.location.reload(),oldstatus!=o.data.status&&_loading_toast._longshow("游戏还未开始,请等待按照主持人指挥操作")),2==o.data.status){var a=GAMECONFIG.themeconfig.slogan.length;0<a&&_loading_toast._show(GAMECONFIG.themeconfig.slogan[Math.floor(a*Math.random())]),oldstatus!=o.data.status&&0==isbind&&(s.start(),e(window).on(n,l),function o(){r=setTimeout(function(){o()},3e3),0!=u&&1!=p&&(p=!0,1==JOINSTATUS?h().done(function(o){}).always(function(){p=!1}):p=!1)}(),isbind=!0)}3==o.data.status&&oldstatus!=o.data.status&&(_loading_toast._longshow("本轮游戏已经结束,后面可能还有游戏哦!"),function(){null!=r&&clearTimeout(r);1==isbind&&(e(window).off(n,l),s.stop(),isbind=!1)}()),oldstatus=o.data.status}}),checkstatustimer=setTimeout(i,3e3)}oldstatus=0,checkstatustimer=null,isbind=!1,window.shakeaudio=null;var n="shake",s=new o({threshold:15,timeout:300}),u=!1,d=null,l=function(){null!=typeof a?e(window.shakeaudio).on("canplaythrough",function(){(window.shakeaudio.paused||window.shakeaudio.ended)&&window.shakeaudio.play()}):e(document).on("WeixinJSBridgeReady",function(){e(window.shakeaudio).load(),e(window.shakeaudio).on("canplaythrough",function(){(window.shakeaudio.paused||window.shakeaudio.ended)&&window.shakeaudio.play()})}),u=!0,clearTimeout(d),d=setTimeout(function(){u=!1},3e3)},p=!1,r=null;var h=function(){var o=2+Math.floor(5*Math.random());return e.ajax({url:"/Modules/module.php?m=game&c=mobile&a=ajaxPostData",data:{userid:USERINFO.id,points:o},type:"post",dataType:"json"})};e("document").ready(function(){0<GAMECONFIG.themeconfig.mobilebg?e('<img src="'+GAMECONFIG.themeconfig.mobilebg_path+'" style="width:100%; height:100%;z-index:-1;"/>').appendTo("body"):bubbly(),e(".shake-icon").css({background:"url("+GAMECONFIG.themeconfig.mobileimg_path+") no-repeat","background-size":"100% 100% "}),window.shakeaudio=e("#ShakeAudio")[0],e(document).on("WeixinJSBridgeReady",function(){e(window.shakeaudio).load()}),e(".dropdown-menu").click(function(){e("#pop_nav").hasClass("weui-popup-container-visible")||(e("#pop_nav").popup(),e(".weui-popup-overlay").show())}),e(document).on("WeixinJSBridgeReady",function(){a.call("hideOptionMenu")}),i()})});
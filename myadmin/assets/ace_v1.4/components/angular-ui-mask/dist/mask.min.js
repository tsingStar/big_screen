!function(){"use strict";angular.module("ui.mask",[]).value("uiMaskConfig",{maskDefinitions:{9:/\d/,A:/[a-zA-Z]/,"*":/[a-zA-Z0-9]/},clearOnBlur:!0,clearOnBlurPlaceholder:!1,eventsToHandle:["input","keyup","click","focus"]}).provider("uiMask.Config",function(){var r={};this.clearOnBlur=function(e){return r.clearOnBlur=e},this.clearOnBlurPlaceholder=function(e){return r.clearOnBlurPlaceholder=e},this.eventsToHandle=function(e){return r.eventsToHandle=e},this.$get=["uiMaskConfig",function(e){var n=e;for(var t in r)n[t]=r[t];return n}]}).directive("uiMask",["uiMask.Config",function(e){function F(e){return e===document.activeElement&&(!document.hasFocus||document.hasFocus())&&!!(e.type||e.href||~e.tabIndex)}return{priority:100,require:"ngModel",restrict:"A",compile:function(){var E=e;return function(M,O,a,x){function e(e){return angular.isDefined(e)?(function(e){var t=0;if(_=[],s=[],B="",angular.isString(e)){var r=!1,i=h=0,n=e.split("");angular.forEach(n,function(e,n){y.maskDefinitions[e]?(_.push(t),B+=function(e){var n,t=angular.isDefined(a.uiMaskPlaceholder)?a.uiMaskPlaceholder:a.placeholder;return angular.isDefined(t)&&t[e]?t[e]:"space"===(n=angular.isDefined(a.uiMaskPlaceholderChar)&&a.uiMaskPlaceholderChar?a.uiMaskPlaceholderChar:"_").toLowerCase()?" ":n[0]}(n-i),s.push(y.maskDefinitions[e]),t++,r||h++,r=!1):"?"===e?(r=!0,i++):(B+=e,t++)})}_.push(_.slice().pop()+1),f=function(){var t,e,n=B.split("");_&&!isNaN(_[0])&&angular.forEach(_,function(e){n[e]="_"}),t=n.join(""),e=(e=t.replace(/[_]+/g,"_").replace(/([^_]+)([a-zA-Z0-9])([^_])/g,"$1$2_$3").split("_")).filter(function(e){return""!==e});var r=0;return e.map(function(e){var n=t.indexOf(e,r);return r=n+1,{value:e,position:n}})}(),g=1<_.length}(e),g?(function(){d=j=V(x.$modelValue||""),T=P(d),v=r(d),a.maxlength&&O.attr("maxlength",2*_[_.length-1]),m||O.attr("placeholder",B);for(var e=x.$modelValue,n=x.$formatters.length;n--;)e=x.$formatters[n](e);x.$viewValue=e||"",x.$render()}(),p||(O.bind("blur",i),O.bind("mousedown mouseup",u),O.bind("keydown",o),O.bind(y.eventsToHandle.join(" "),c),p=!0),!0):t()):t()}function n(e){e&&(B=e,!g||0===O.val().length&&angular.isDefined(a.placeholder)||O.val(P(V(O.val()))))}function t(){return g=!1,p&&(O.unbind("blur",i),O.unbind("mousedown",u),O.unbind("mouseup",u),O.unbind("keydown",o),O.unbind("input",c),O.unbind("keyup",c),O.unbind("click",c),O.unbind("focus",c),p=!1),angular.isDefined(m)?O.attr("placeholder",m):O.removeAttr("placeholder"),angular.isDefined(b)?O.attr("maxlength",b):O.removeAttr("maxlength"),O.val(x.$modelValue),x.$viewValue=x.$modelValue,!1}function r(e){return!e.length||e.length>=h}function V(t){var r,i,n="",e=O[0],a=s.slice(),u=H,l=u+S(e),o="";return t=t.toString(),r=0,i=t.length-B.length,angular.forEach(f,function(e){var n=e.position;u<=n&&n<l||(u<=n&&(n+=i),t.substring(n,n+e.value.length)===e.value&&(o+=t.slice(r,n),r=n+e.value.length))}),t=o+t.slice(r),angular.forEach(t.split(""),function(e){a.length&&a[0].test(e)&&(n+=e,a.shift())}),n}function P(t){var r="",i=_.slice();return angular.forEach(B.split(""),function(e,n){t.length&&n===i[0]?(r+=t.charAt(0)||"_",t=t.substr(1),i.shift()):r+=e}),r}function i(){(y.clearOnBlur||y.clearOnBlurPlaceholder&&0===d.length&&a.placeholder)&&(R=H=0,v&&0!==d.length||("",O.val(""),M.$apply(function(){x.$viewValue=""}))),d!==w&&function(e){var n;angular.isFunction(window.Event)&&!e.fireEvent?(n=new Event("change",{view:window,bubbles:!0,cancelable:!1}),e.dispatchEvent(n)):"createEvent"in document?((n=document.createEvent("HTMLEvents")).initEvent("change",!1,!0),e.dispatchEvent(n)):e.fireEvent&&e.fireEvent("onchange")}(O[0]),w=d}function u(e){"mousedown"===e.type?O.bind("mouseout",l):O.unbind("mouseout",l)}function l(){R=S(this),O.unbind("mouseout",l)}function o(e){var n=8===e.which,t=A(this)-1||0;if(n){for(;0<=t;){if(D(t)){C(this,t+1);break}t--}z=-1===t}}function c(e){var n=(e=e||{}).which,t=e.type;if(16!==n&&91!==n){var r,i=O.val(),a=T,u=!1,l=V(i),o=j,c=A(this)||0,s=H||0,f=c-s,h=_[0],d=_[l.length]||_.slice().shift(),v=R||0,g=0<S(this),p=0<v,m=i.length>a.length||v&&i.length>a.length-v,b=i.length<a.length||v&&i.length===a.length-v,k=37<=n&&n<=40&&e.shiftKey,$=8===n||"keyup"!==t&&b&&-1==f,y=46===n||"keyup"!==t&&b&&0==f&&!p,w=(37===n||$||"click"===t)&&h<c;if(R=S(this),!k&&(!g||"click"!==t&&"keyup"!==t&&"focus"!==t)){if($&&z)return O.val(B),M.$apply(function(){x.$setViewValue("")}),void C(this,s);if("input"===t&&b&&!p&&l===o){for(;$&&h<c&&!D(c);)c--;for(;y&&c<d&&-1===_.indexOf(c);)c++;var E=_.indexOf(c);(l=l.substring(0,E)+l.substring(E+1))!==o&&(u=!0)}for(r=P(l),T=r,j=l,!u&&i.length>r.length&&(u=!0),O.val(r),u&&M.$apply(function(){x.$setViewValue(r)}),m&&c<=h&&(c=h+1),w&&c--,c=d<c?d:c<h?h:c;!D(c)&&h<c&&c<d;)c+=w?-1:1;(w&&c<d||m&&!D(s))&&c++,C(this,H=c)}}}function D(e){return-1<_.indexOf(e)}function A(e){if(!e)return 0;if(void 0!==e.selectionStart)return e.selectionStart;if(document.selection&&F(O[0])){e.focus();var n=document.selection.createRange();return n.moveStart("character",e.value?-e.value.length:0),n.text.length}return 0}function C(e,n){if(!e)return 0;if(0!==e.offsetWidth&&0!==e.offsetHeight)if(e.setSelectionRange)F(O[0])&&(e.focus(),e.setSelectionRange(n,n));else if(e.createTextRange){var t=e.createTextRange();t.collapse(!0),t.moveEnd("character",n),t.moveStart("character",n),t.select()}}function S(e){return e?void 0!==e.selectionStart?e.selectionEnd-e.selectionStart:document.selection?document.selection.createRange().text.length:0:0}var _,s,B,f,h,d,v,T,j,H,R,z,g=!1,p=!1,m=a.placeholder,b=a.maxlength,k=x.$isEmpty,$=!(x.$isEmpty=function(e){return k(g?V(e||""):e)});a.$observe("modelViewValue",function(e){"true"===e&&($=!0)});var y={};y=a.uiOptions?(y=M.$eval("["+a.uiOptions+"]"),angular.isObject(y[0])?function(e,n){for(var t in e)Object.prototype.hasOwnProperty.call(e,t)&&(void 0===n[t]?n[t]=angular.copy(e[t]):angular.isObject(n[t])&&!angular.isArray(n[t])&&(n[t]=angular.extend({},e[t],n[t])));return n}(E,y[0]):E):E,a.$observe("uiMask",e),angular.isDefined(a.uiMaskPlaceholder)?a.$observe("uiMaskPlaceholder",n):a.$observe("placeholder",n),angular.isDefined(a.uiMaskPlaceholderChar)&&a.$observe("uiMaskPlaceholderChar",function(){return e(a.uiMask)}),x.$formatters.unshift(function(e){return g?(d=V(e||""),v=r(d),x.$setValidity("mask",v),v&&d.length?P(d):void 0):e}),x.$parsers.unshift(function(e){return g?(d=V(e||""),v=r(d),x.$viewValue=d.length?P(d):"",x.$setValidity("mask",v),v?$?x.$viewValue:d:void 0):e});var w=O.val();O.bind("mousedown mouseup",u),Array.prototype.indexOf||(Array.prototype.indexOf=function(e){if(null===this)throw new TypeError;var n=Object(this),t=n.length>>>0;if(0==t)return-1;var r=0;if(1<arguments.length&&((r=Number(arguments[1]))!=r?r=0:0!==r&&r!==1/0&&r!==-1/0&&(r=(0<r||-1)*Math.floor(Math.abs(r)))),t<=r)return-1;for(var i=0<=r?r:Math.max(t-Math.abs(r),0);i<t;i++)if(i in n&&n[i]===e)return i;return-1})}}}}])}();
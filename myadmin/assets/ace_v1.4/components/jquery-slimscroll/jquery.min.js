!function(M){M.fn.extend({slimScroll:function(R){var D=M.extend({width:"auto",height:"250px",size:"7px",color:"#000",position:"right",distance:"1px",start:"top",opacity:.4,alwaysVisible:!1,disableFadeOut:!1,railVisible:!1,railColor:"#333",railOpacity:.2,railDraggable:!0,railClass:"slimScrollRail",barClass:"slimScrollBar",wrapperClass:"slimScrollDiv",allowPageScroll:!1,wheelStep:20,touchScrollStep:200,borderRadius:"7px",railBorderRadius:"7px"},R);return this.each(function(){function e(e){if(o){var t=0;(e=e||window.event).wheelDelta&&(t=-e.wheelDelta/120),e.detail&&(t=e.detail/3);var i=e.target||e.srcTarget||e.srcElement;M(i).closest("."+D.wrapperClass).is(w.parent())&&s(t,!0),e.preventDefault&&!b&&e.preventDefault(),b||(e.returnValue=!1)}}function s(e,t,i){b=!1;var s=e,o=w.outerHeight()-S.outerHeight();if(t&&(s=parseInt(S.css("top"))+e*parseInt(D.wheelStep)/100*S.outerHeight(),s=Math.min(Math.max(s,0),o),s=0<e?Math.ceil(s):Math.floor(s),S.css({top:s+"px"})),s=(d=parseInt(S.css("top"))/(w.outerHeight()-S.outerHeight()))*(w[0].scrollHeight-w.outerHeight()),i){var r=(s=e)/w[0].scrollHeight*w.outerHeight();r=Math.min(Math.max(r,0),o),S.css({top:r+"px"})}w.scrollTop(s),w.trigger("slimscrolling",~~s),a(),l()}function i(){u=Math.max(w.outerHeight()/w[0].scrollHeight*w.outerHeight(),v),S.css({height:u+"px"});var e=u==w.outerHeight()?"none":"block";S.css({display:e})}function a(){if(i(),clearTimeout(c),d==~~d){if(b=D.allowPageScroll,p!=d){var e=0==~~d?"top":"bottom";w.trigger("slimscroll",e)}}else b=!1;return p=d,u>=w.outerHeight()?void(b=!0):(S.stop(!0,!0).fadeIn("fast"),void(D.railVisible&&H.stop(!0,!0).fadeIn("fast")))}function l(){D.alwaysVisible||(c=setTimeout(function(){D.disableFadeOut&&o||r||n||(S.fadeOut("slow"),H.fadeOut("slow"))},1e3))}var o,r,n,c,h,u,d,p,g,f="<div></div>",v=30,b=!1,w=M(this);if(w.parent().hasClass(D.wrapperClass)){var m=w.scrollTop();if(S=w.siblings("."+D.barClass),H=w.siblings("."+D.railClass),i(),M.isPlainObject(R)){if("height"in R&&"auto"==R.height){w.parent().css("height","auto"),w.css("height","auto");var y=w.parent().parent().height();w.parent().css("height",y),w.css("height",y)}else if("height"in R){var x=R.height;w.parent().css("height",x),w.css("height",x)}if("scrollTo"in R)m=parseInt(D.scrollTo);else if("scrollBy"in R)m+=parseInt(D.scrollBy);else if("destroy"in R)return S.remove(),H.remove(),void w.unwrap();s(m,!1,!0)}}else if(!(M.isPlainObject(R)&&"destroy"in R)){D.height="auto"==D.height?w.parent().height():D.height;var C=M(f).addClass(D.wrapperClass).css({position:"relative",overflow:"hidden",width:D.width,height:D.height});w.css({overflow:"hidden",width:D.width,height:D.height});var H=M(f).addClass(D.railClass).css({width:D.size,height:"100%",position:"absolute",top:0,display:D.alwaysVisible&&D.railVisible?"block":"none","border-radius":D.railBorderRadius,background:D.railColor,opacity:D.railOpacity,zIndex:90}),S=M(f).addClass(D.barClass).css({background:D.color,width:D.size,position:"absolute",top:0,opacity:D.opacity,display:D.alwaysVisible?"block":"none","border-radius":D.borderRadius,BorderRadius:D.borderRadius,MozBorderRadius:D.borderRadius,WebkitBorderRadius:D.borderRadius,zIndex:99}),E="right"==D.position?{right:D.distance}:{left:D.distance};H.css(E),S.css(E),w.wrap(C),w.parent().append(S),w.parent().append(H),D.railDraggable&&S.bind("mousedown",function(e){var i=M(document);return n=!0,t=parseFloat(S.css("top")),pageY=e.pageY,i.bind("mousemove.slimscroll",function(e){currTop=t+e.pageY-pageY,S.css("top",currTop),s(0,S.position().top,!1)}),i.bind("mouseup.slimscroll",function(e){n=!1,l(),i.unbind(".slimscroll")}),!1}).bind("selectstart.slimscroll",function(e){return e.stopPropagation(),e.preventDefault(),!1}),H.hover(function(){a()},function(){l()}),S.hover(function(){r=!0},function(){r=!1}),w.hover(function(){o=!0,a(),l()},function(){o=!1,l()}),w.bind("touchstart",function(e,t){e.originalEvent.touches.length&&(h=e.originalEvent.touches[0].pageY)}),w.bind("touchmove",function(e){b||e.originalEvent.preventDefault(),e.originalEvent.touches.length&&(s((h-e.originalEvent.touches[0].pageY)/D.touchScrollStep,!0),h=e.originalEvent.touches[0].pageY)}),i(),"bottom"===D.start?(S.css({top:w.outerHeight()-S.outerHeight()}),s(0,!0)):"top"!==D.start&&(s(M(D.start).position().top,null,!0),D.alwaysVisible||S.hide()),g=this,window.addEventListener?(g.addEventListener("DOMMouseScroll",e,!1),g.addEventListener("mousewheel",e,!1)):document.attachEvent("onmousewheel",e)}}),this}}),M.fn.extend({slimscroll:M.fn.slimScroll})}(jQuery);
!function(t,e){"object"==typeof module&&module.exports?module.exports=e():"function"==typeof define&&define.amd?define(e):t.Spinner=e()}(this,function(){"use strict";function m(t,e){var i,o=document.createElement(t||"div");for(i in e)o[i]=e[i];return o}function y(t){for(var e=1,i=arguments.length;e<i;e++)t.appendChild(arguments[e]);return t}function o(t,e){var i,o,n=t.style;if(void 0!==n[e=e.charAt(0).toUpperCase()+e.slice(1)])return e;for(o=0;o<r.length;o++)if(void 0!==n[i=r[o]+e])return i}function v(t,e){for(var i in e)t.style[o(t,i)||i]=e[i];return t}function e(t){for(var e=1;e<arguments.length;e++){var i=arguments[e];for(var o in i)void 0===t[o]&&(t[o]=i[o])}return t}function g(t,e){return"string"==typeof t?t:t[e%t.length]}function i(t){this.opts=e(t||{},i.defaults,n)}var w,x,t,r=["webkit","Moz","ms","O"],b={},n={lines:12,length:7,width:5,radius:10,scale:1,corners:1,color:"#000",opacity:.25,rotate:0,direction:1,speed:1,trail:100,fps:20,zIndex:2e9,className:"spinner",top:"50%",left:"50%",shadow:!1,hwaccel:!1,position:"absolute"};if(i.defaults={},e(i.prototype,{spin:function(t){this.stop();var i=this,o=i.opts,n=i.el=m(null,{className:o.className});if(v(n,{position:o.position,width:0,zIndex:o.zIndex,left:o.left,top:o.top}),t&&t.insertBefore(n,t.firstChild||null),n.setAttribute("role","progressbar"),i.lines(n,i.opts),!w){var r,s=0,a=(o.lines-1)*(1-o.direction)/2,l=o.fps,c=l/o.speed,d=(1-o.opacity)/(c*o.trail/100),p=c/o.lines;!function t(){s++;for(var e=0;e<o.lines;e++)r=Math.max(1-(s+(o.lines-e)*p)%c*d,o.opacity),i.opacity(n,e*o.direction+a,r,o);i.timeout=i.el&&setTimeout(t,~~(1e3/l))}()}return i},stop:function(){var t=this.el;return t&&(clearTimeout(this.timeout),t.parentNode&&t.parentNode.removeChild(t),this.el=void 0),this},lines:function(t,i){function e(t,e){return v(m(),{position:"absolute",width:i.scale*(i.length+i.width)+"px",height:i.scale*i.width+"px",background:t,boxShadow:e,transformOrigin:"left",transform:"rotate("+~~(360/i.lines*n+i.rotate)+"deg) translate("+i.scale*i.radius+"px,0)",borderRadius:(i.corners*i.scale*i.width>>1)+"px"})}for(var o,n=0,r=(i.lines-1)*(1-i.direction)/2;n<i.lines;n++)o=v(m(),{position:"absolute",top:1+~(i.scale*i.width/2)+"px",transform:i.hwaccel?"translate3d(0,0,0)":"",opacity:i.opacity,animation:w&&(s=i.opacity,a=i.trail,l=r+n*i.direction,c=i.lines,void 0,void 0,void 0,void 0,void 0,d=["opacity",a,~~(100*s),l,c].join("-"),p=.01+l/c*100,u=Math.max(1-(1-s)/a*(100-p),s),f=w.substring(0,w.indexOf("Animation")).toLowerCase(),h=f&&"-"+f+"-"||"",b[d]||(x.insertRule("@"+h+"keyframes "+d+"{0%{opacity:"+u+"}"+p+"%{opacity:"+s+"}"+(.01+p)+"%{opacity:1}"+(p+a)%100+"%{opacity:"+s+"}100%{opacity:"+u+"}}",x.cssRules.length),b[d]=1),d+" "+1/i.speed+"s linear infinite")}),i.shadow&&y(o,v(e("#000","0 0 4px #000"),{top:"2px"})),y(t,y(o,e(g(i.color,n),"0 0 1px rgba(0,0,0,.1)")));var s,a,l,c,d,p,u,f,h;return t},opacity:function(t,e,i){e<t.childNodes.length&&(t.childNodes[e].style.opacity=i)}}),"undefined"!=typeof document){t=m("style",{type:"text/css"}),y(document.getElementsByTagName("head")[0],t),x=t.sheet||t.styleSheet;var s=v(m("group"),{behavior:"url(#default#VML)"});!o(s,"transform")&&s.adj?(x.addRule(".spin-vml","behavior:url(#default#VML)"),i.prototype.lines=function(t,o){function n(){return v(c("group",{coordsize:s+" "+s,coordorigin:-r+" "+-r}),{width:s,height:s})}function e(t,e,i){y(l,y(v(n(),{rotation:360/o.lines*t+"deg",left:~~e}),y(v(c("roundrect",{arcsize:o.corners}),{width:r,height:o.scale*o.width,left:o.scale*o.radius,top:-o.scale*o.width>>1,filter:i}),c("fill",{color:g(o.color,t),opacity:o.opacity}),c("stroke",{opacity:0}))))}var i,r=o.scale*(o.length+o.width),s=2*o.scale*r,a=-(o.width+o.length)*o.scale*2+"px",l=v(n(),{position:"absolute",top:a,left:a});if(o.shadow)for(i=1;i<=o.lines;i++)e(i,-2,"progid:DXImageTransform.Microsoft.Blur(pixelradius=2,makeshadow=1,shadowopacity=.3)");for(i=1;i<=o.lines;i++)e(i);return y(t,l)},i.prototype.opacity=function(t,e,i,o){var n=t.firstChild;o=o.shadow&&o.lines||0,n&&e+o<n.childNodes.length&&(n=(n=(n=n.childNodes[e+o])&&n.firstChild)&&n.firstChild)&&(n.opacity=i)}):w=o(s,"animation")}function c(t,e){return m("<"+t+' xmlns="urn:schemas-microsoft.com:vml" class="spin-vml">',e)}return i});
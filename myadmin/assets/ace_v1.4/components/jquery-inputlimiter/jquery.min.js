!function(x){x.fn.inputlimiter=function(i){var o=x.extend({},x.fn.inputlimiter.defaults,i);x(this),o.boxAttach&&!x("#"+o.boxId).length&&(x("<div/>").appendTo("body").attr({id:o.boxId,class:o.boxClass}).css({position:"absolute"}).hide(),x.fn.bgiframe&&x("#"+o.boxId).bgiframe());function l(t){var e=x(this),i=m(e.val());!o.allowExceed&&i>o.limit&&e.val(s(e.val())),o.boxAttach&&x("#"+o.boxId).css({width:e.outerWidth()-(x("#"+o.boxId).outerWidth()-x("#"+o.boxId).width())+"px",left:e.offset().left+"px",top:e.offset().top+e.outerHeight()-1+"px","z-index":2e3});var l=0<o.limit-i?o.limit-i:0,r=o.remTextFilter(o,l),n=o.limitTextFilter(o);if(o.limitTextShow){x("#"+o.boxId).html(r+" "+n);var a=x("<span/>").appendTo("body").attr({id:"19cc9195583bfae1fad88e19d443be7a",class:o.boxClass}).html(r+" "+n).innerWidth();x("#19cc9195583bfae1fad88e19d443be7a").remove(),a>x("#"+o.boxId).innerWidth()&&x("#"+o.boxId).html(r+"<br />"+n),x("#"+o.boxId).show()}else x("#"+o.boxId).html(r).show()}function r(t){var e=m(x(this).val());if(!o.allowExceed&&e>o.limit&&!(t.ctrlKey||t.altKey||t.metaKey)&&32<=t.which&&t.which<=122&&this.selectionStart===this.selectionEnd)return!1}function n(){var t=x(this);if(count=m(t.val()),!o.allowExceed&&count>o.limit&&t.val(s(t.val())),o.boxAttach)x("#"+o.boxId).fadeOut("fast");else if(o.remTextHideOnBlur){var e=o.limitText;e=(e=e.replace(/\%n/g,o.limit)).replace(/\%s/g,1===o.limit?"":"s"),x("#"+o.boxId).html(e)}}var m=function(t){if("words"===o.limitBy.toLowerCase())return 0<t.length?x.trim(t).replace(/\ +(?= )/g,"").split(" ").length:0;var e=t.length,i=t.match(/\n/g);return i&&1<o.lineReturnCount&&(e+=i.length*(o.lineReturnCount-1)),e},s=function(t){return"words"===o.limitBy.toLowerCase()?x.trim(t).replace(/\ +(?= )/g,"").split(" ").splice(0,o.limit).join(" ")+" ":t.substring(0,o.limit)};x(this).each(function(t){var e=x(this);(!i||!i.limit)&&o.useMaxlength&&0<parseInt(e.attr("maxlength"))&&parseInt(e.attr("maxlength"))!=o.limit?e.inputlimiter(x.extend({},o,{limit:parseInt(e.attr("maxlength"))})):(!o.allowExceed&&o.useMaxlength&&"characters"===o.limitBy.toLowerCase()&&e.attr("maxlength",o.limit),e.unbind(".inputlimiter"),e.bind("keyup.inputlimiter",l),e.bind("keypress.inputlimiter",r),e.bind("blur.inputlimiter",n))})},x.fn.inputlimiter.remtextfilter=function(t,e){var i=t.remText;return 0===e&&null!==t.remFullText&&(i=t.remFullText),(i=i.replace(/\%n/g,e)).replace(/\%s/g,t.zeroPlural?1===e?"":"s":e<=1?"":"s")},x.fn.inputlimiter.limittextfilter=function(t){var e=t.limitText;return(e=e.replace(/\%n/g,t.limit)).replace(/\%s/g,t.limit<=1?"":"s")},x.fn.inputlimiter.defaults={limit:255,boxAttach:!0,boxId:"limiterBox",boxClass:"limiterBox",remText:"%n character%s remaining.",remTextFilter:x.fn.inputlimiter.remtextfilter,remTextHideOnBlur:!0,remFullText:null,limitTextShow:!0,limitText:"Field limited to %n character%s.",limitTextFilter:x.fn.inputlimiter.limittextfilter,zeroPlural:!0,allowExceed:!1,useMaxlength:!0,limitBy:"characters",lineReturnCount:1}}(jQuery);
angular.module("ui.slider",[]).value("uiSliderConfig",{}).directive("uiSlider",["uiSliderConfig","$timeout",function(p,f){return p=p||{},{require:"ngModel",compile:function(){return{pre:function(l,r,i,o){function n(e,a){return a?parseFloat(e):parseInt(e,10)}function e(){r.hasClass("ui-slider")&&r.slider("destroy")}var a=angular.copy(l.$eval(i.uiSlider)),d=angular.extend(a||{},p),u={min:null,max:null},s=["min","max","step","lowerBound","upperBound"],t=!angular.isUndefined(i.useDecimals),v=function(){angular.isArray(o.$viewValue)&&!0!==d.range&&(console.warn("Change your range option of ui-slider. When assigning ngModel an array of values then the range option should be set to true."),d.range=!0),angular.forEach(s,function(e){angular.isDefined(i[e])&&(d[e]=n(i[e],t))}),r.slider(d),v=angular.noop};angular.forEach(s,function(a){i.$observe(a,function(e){e&&(v(),d[a]=n(e,t),r.slider("option",a,n(e,t)),o.$render())})}),i.$observe("disabled",function(e){v(),r.slider("option","disabled",!!e)}),l.$watch(i.uiSlider,function(e){v(),void 0!==e&&r.slider("option",e)},!0),f(v,0,!0),r.bind("slide",function(e,a){var i;if(a.values){var n=a.values.slice();d.lowerBound&&n[0]<d.lowerBound&&(n[0]=Math.max(n[0],d.lowerBound)),d.upperBound&&n[1]>d.upperBound&&(n[1]=Math.min(n[1],d.upperBound)),n[0]===a.values[0]&&n[1]===a.values[1]||(i=!0,a.values=n)}else{var u=a.value;d.lowerBound&&u<d.lowerBound&&(u=Math.max(u,d.lowerBound)),d.upperBound&&u>d.upperBound&&(u=Math.min(u,d.upperBound)),u!==a.value&&(i=!0,a.value=u)}return o.$setViewValue(a.values||a.value),$(a.handle).find(".ui-slider-tip").text(a.value),l.$apply(),i?(setTimeout(function(){r.slider("value",a.values||a.value)},0),!1):void 0}),o.$render=function(){v();var e=!0===d.range?"values":"value";if(!0===d.range||!isNaN(o.$viewValue)||o.$viewValue instanceof Array?d.range&&!angular.isDefined(o.$viewValue)&&(o.$viewValue=[0,0]):o.$viewValue=0,!0===d.range){if(o.$viewValue&&angular.isString(o.$viewValue)&&1===(o.$viewValue.match(/,/g)||[]).length){var a=o.$viewValue.split(",");o.$viewValue=[Number(a[0]),Number(a[1])]}angular.isDefined(d.min)&&d.min>o.$viewValue[0]&&(o.$viewValue[0]=d.min),angular.isDefined(d.max)&&d.max<o.$viewValue[1]&&(o.$viewValue[1]=d.max),o.$viewValue[0]>o.$viewValue[1]&&(u.min>=o.$viewValue[1]&&(o.$viewValue[1]=u.min),u.max<=o.$viewValue[0]&&(o.$viewValue[0]=u.max)),u.min=o.$viewValue[0],u.max=o.$viewValue[1]}r.slider(e,o.$viewValue)},l.$watch(i.ngModel,function(){!0===d.range&&o.$render()},!0),l.$on("$destroy",e),r.one("$destroy",e)},post:function(e,a,i,n){var u=angular.extend({},e.$eval(i.uiSlider));if(angular.forEach(["min","max","step","tick","tip"],function(e){angular.isDefined(i[e])&&(u[e]=i[e])}),angular.isDefined(u.tick)&&angular.isDefined(u.step))for(var l=parseInt((parseInt(u.max)-parseInt(u.min))/parseInt(u.step)),r=l;0<=r;r--){var o=r/l*100+"%";$("<div/>").addClass("ui-slider-tick").appendTo(a).css({left:o})}angular.isDefined(u.tip)&&f(function(){a.find(".ui-slider-handle").append('<div class="ui-slider-tip">'+n.$viewValue+"</div>")},10)}}}}}]);
!function(){if(void 0===a||!a)var a={default:{client:null,token:null,openID:null,ua:null,id:null,progress:0,startShake:!1,shakeTime:0,totalTime:10,socket:null,audio:null,audio2:null,gamestatus:0,msg:{notready:"请等待大屏幕开启摇一摇活动后再加入",join:"成功加入，等待开始游戏",start:"游戏开始了，小伙伴们疯狂摇起来！",over:"游戏结束, ",noresult:"您没有参与本轮游戏"}},init:function(){if(-3==joingame.code)return $(".tips").html(joingame.msg),!1;a.default.totalTime=pashu_config.times,a.setFullScreen(320),a.scan(),a.initGame(),a.initAudio(),a.bindEvent()},initAudio:function(){a.default.audio=window.audio_shake,a.default.audio2=window.audio_countdown},initGame:function(){window.checkstatustimer=setInterval(function(){$.ajax({url:"pashu.do.php?action=getstatus",data:{id:pashu_config.id},type:"post",dataType:"json",success:function(e){$(".tips").html(e.msg),2==e.status&&($(".overlay").removeClass("show"),$(".tips").html(a.default.msg.start),$(".hand").addClass("shake"),$(".progress").removeClass("hide"),a.default.startShake=!0,clearInterval(window.checkstatustimer))}})},1e3)},bindEvent:function(){new Shake({threshold:10}).start(),window.addEventListener("shake",a.shakeEvent,!1)},timecount:function(){},progress:function(){Math.round(a.default.shakeTime/a.default.totalTime*100)<=100||a.onsuccess()},onsuccess:function(){a.stopShake()},startShake:function(){a.djstime()},djstime:function(){ready_time<0&&(reday_time=true_ready_time),$(".overlay").addClass("show"),interval=window.setInterval(function(){auio_play(a.default.audio2),$(".count").html('<span class="count_nums" style="display: inline;">'+ready_time+"<b>s</b></span>"),ready_time--,ready_time<0&&($(".overlay").removeClass("show"),$(".tips").html(a.default.msg.start),$(".hand").addClass("shake"),$(".progress").removeClass("hide"),a.default.startShake=!0,window.clearInterval(interval))},1e3)},stopShake:function(){$(".hand").removeClass("shake"),$(".progress").addClass("hide"),a.default.startShake=!1,a.default.shakeTime=0,$(".tips").html("游戏完成，请关注大屏幕显示比赛结果").show()},resetShake:function(){$(".progress").addClass("hide"),$(".progress .val").css("-webkit-transform","translateX(-100%)")},shakeEvent:function(){a.default.startShake&&$.ajax({url:"pashu.do.php?action=run",data:{id:pashu_config.id,openid:openid},type:"post",dataType:"json",success:function(e){1==e.code&&(3==e.data.status?a.stopShake():(a.default.shakeTime=e.data.point,a.progress(),auio_play(a.default.audio))),2==e.code&&a.stopShake()}})},scan:function(){var e,t;a.default.ua=(e=navigator.userAgent,t=navigator.appVersion,{win32:"Win32"===navigator.platform,ie:/MSIE ([^;]+)/.test(e),ieMobile:window.navigator.msPointerEnabled,ieVersion:Math.floor((/MSIE ([^;]+)/.exec(e)||[0,"0"])[1]),ios:/iphone|ipad/gi.test(t),iphone:/iphone/gi.test(t),ipad:/ipad/gi.test(t),iosVersion:parseFloat((""+(/CPU.*OS ([0-9_]{1,5})|(CPU like).*AppleWebKit.*Mobile/i.exec(e)||[0,""])[1]).replace("undefined","3_2").replace("_",".").replace("_",""))||!1,safari:/Version\//gi.test(t)&&/Safari/gi.test(t),uiWebView:/(iPhone|iPod|iPad).*AppleWebKit(?!.*Safari)/i.test(e),android:/android/gi.test(t),androidVersion:parseFloat(""+(/android ([0-9\.]*)/i.exec(e)||[0,""])[1]),chrome:/Chrome/gi.test(e),chromeVersion:parseInt((/Chrome\/([0-9]*)/gi.exec(e)||[0,0])[1],10),webkit:/AppleWebKit/.test(t),uc:-1!==t.indexOf("UCBrowser"),Browser:/ Browser/gi.test(t),MiuiBrowser:/MiuiBrowser/gi.test(t),MicroMessenger:"micromessenger"==e.toLowerCase().match(/MicroMessenger/i),canTouch:"ontouchstart"in document})},getParam:function(e,t){var a=new RegExp("(\\?|#|&)"+e+"=(.*?)(#|&|$)"),i=(t||location.href).match(a);return decodeURIComponent(i?i[2]:"")},cookie:function(e,t,a){if(void 0===t){var i=null;if(document.cookie&&""!=document.cookie)for(var o=document.cookie.split(";"),n=0;n<o.length;n++){var s=o[n].replace(/^\s*(.*?)\s*$/,"$1");if(s.substring(0,e.length+1)==e+"="){i=decodeURIComponent(s.substring(e.length+1));break}}return i}a=a||{},null===t&&(t="",a.expires=-1);var r,d="";a.expires&&("number"==typeof a.expires||a.expires.toUTCString)&&("number"==typeof a.expires?(r=new Date).setTime(r.getTime()+1e3*a.expires):r=a.expires,d="; expires="+r.toUTCString());var u=a.path?"; path="+a.path:"",l=a.domain?"; domain="+a.domain:"",c=a.secure?"; secure":"";document.cookie=[e,"=",encodeURIComponent(t),d,u,l,c].join("")},setFullScreen:function(e){}};a.init()}();var e=function(o){return function(e,t){var a,i;if("object"==typeof e&&"object"==typeof t&&e&&t)return(a=e[o])===(i=t[o])?0:a<i?-1:1;throw"error"}};